<!doctype html>
<meta charset="utf-8" />
<title>Abando Preview</title>
<div id="abando-preview">Loadingâ€¦</div>
<script>
(async function () {
  const payload = {
    brand: "Abando",
    tone: "friendly",
    resumeUrl: "https://example-shop.test/cart?cart_id=demo123",
    items: [{ sku: "Waxed Canvas Tote", qty: 1, image: "https://resend.com/static/sample/logo.png" }]
  };
  // LOCAL while developing. After you deploy the API, swap to https://app.abando.ai
  const res = await fetch("http://localhost:3000/api/preview/abandon", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });
  const data = await res.json();
  const el = document.getElementById("abando-preview");
  el.innerHTML = `
    <div style="border:1px solid #e5e7eb;border-radius:12px;padding:16px;max-width:560px">
      <div style="font-size:14px;color:#6b7280;margin-bottom:8px">Subject preview</div>
      <div style="font-weight:600;margin-bottom:12px">\${data.subject || "(no subject)"}</div>
      <div style="font-size:14px;color:#6b7280;margin:12px 0">Email body</div>
      \${data.html || "<em>no html</em>"}
    </div>`;
})();
</script>
